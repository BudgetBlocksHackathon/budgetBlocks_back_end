generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model main_wallet {
  id                   Int                    @id
  balance              Decimal?               @db.Decimal
  main_wallet_id       Int?
  user_wallet_relation user_wallet_relation[]
}

model main_wallet_blockchain {
  id              Int      @id
  balance         Decimal? @db.Decimal
  nmemonic_phrase String?  @db.VarChar(100)
}

model sub_wallet {
  id                       Int                    @id
  balance                  Decimal?               @db.Decimal
  sub_wallet_blockchain_id Int?
  max_val                  Decimal?               @db.Decimal
  user_wallet_relation     user_wallet_relation[]
}

model sub_wallet_blockchain {
  id              Int      @id
  balance         Decimal? @db.Decimal
  nmemonic_phrase String?  @db.VarChar(100)
}

model transaction {
  id                      Int                   @id
  balance                 Decimal?              @db.Decimal
  status                  String?               @db.VarChar(50)
  user_wallet_relation_id Int?
  user_wallet_relation    user_wallet_relation? @relation(fields: [user_wallet_relation_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_transaction.user_wallet_relation_id")
}

model user {
  id                   Int                    @id
  user_name            String?                @db.VarChar(50)
  e_mail               String?                @map("e-mail") @db.VarChar(50)
  password             String?                @db.VarChar(50)
  user_wallet_relation user_wallet_relation[]
}

model user_wallet_relation {
  id            Int           @id
  user_id       Int?
  mainwallet_id Int?
  sub_wallet_id Int?
  transaction   transaction[]
  main_wallet   main_wallet?  @relation(fields: [mainwallet_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_user_wallet_relation.mainwallet_id")
  sub_wallet    sub_wallet?   @relation(fields: [sub_wallet_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_user_wallet_relation.sub_wallet_id")
  user          user?         @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_user_wallet_relation.user_id")
}
